<?xml version="1.0" encoding="UTF-8"?>
<Parameters xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R4/fhir-single.xsd">
	<id value="sdc-modular-root-assembled"/>
  <parameter>
    <name value="return"/>
    <resource>
      <Questionnaire>
        <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext">
          <extension url="name">
            <valueCoding>
              <system value="http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"/>
              <code value="patient"/>
            </valueCoding>
          </extension>
          <extension url="type">
            <valueCode value="Patient"/>
          </extension>
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/variable">
          <valueExpression>
            <name value="person"/>
            <language value="text/fhirpath"/>
            <expression value="%patient"/>
          </valueExpression>
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/variable">
          <valueExpression>
            <name value="linkIdPrefix"/>
            <language value="text/fhirpath"/>
            <expression value="'patient.'"/>
          </valueExpression>
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-constraint">
          <extension url="description">
            <valueString value="Must have either first or last name"/>
          </extension>
          <extension url="expression">
            <valueString value="item.where(linkId=%linkIdPrefix+'1').exists() or item.where(linkId=%linkIdPrefix+'2').exists()"/>
          </extension>
          <valueString value="person"/>
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/variable">
          <valueExpression>
            <name value="name"/>
            <language value="text/fhirpath"/>
            <expression value="iif(%person.name.where(use='official').exists(),%person.name.where(use='official')[0],%person.name[0])"/>
          </valueExpression>
        </extension>
        <url value="http://hl7.org/fhir/uv/sdc/Questionnaire/questionnaire-sdc-modular-root-assembled"/>
        <name value="QuestionnaireSDCModularRoot"/>
        <title value="Example modular Questionnaire"/>
        <status value="draft"/>
        <experimental value="true"/>
        <item>
          <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression">
            <valueExpression>
              <language value="text/fhirpath"/>
              <expression value="%name.prefix.where($this in ('Mr.'|'Miss'|'Mrs'|'Ms.'))[0]"/>
            </valueExpression>
          </extension>
          <linkId value="patient.1"/>
          <type value="string"/>
          <required value="true"/>
          <answerOption>
            <valueString value="Mr."/>
          </answerOption>
          <answerOption>
            <valueString value="Miss"/>
          </answerOption>
          <answerOption>
            <valueString value="Mrs."/>
          </answerOption>
          <answerOption>
            <valueString value="Ms."/>
          </answerOption>
        </item>
        <item>
          <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression">
            <valueExpression>
              <language value="text/fhirpath"/>
              <expression value="%name.given[0]"/>
            </valueExpression>
          </extension>
          <linkId value="patient.2"/>
          <definition value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-question-library#Demographics.name.first"/>
          <type value="string"/>
          <required value="true"/>
        </item>
        <item>
          <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression">
            <valueExpression>
              <language value="text/fhirpath"/>
              <expression value="%name.given[0]"/>
            </valueExpression>
          </extension>
          <linkId value="patient.3"/>
          <definition value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-question-library#Demographics.name.last"/>
          <type value="string"/>
          <required value="true"/>
        </item>
        <item>
          <linkId value="2"/>
          <definition value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-question-library#Demographics.dob"/>
          <type value="date"/>
          <required value="true"/>
        </item>
        <item>
          <linkId value="3"/>
          <definition value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-question-library#Demographics.sex"/>
          <type value="choice"/>
          <required value="true"/>
        </item>
        <item>
          <linkId value="4"/>
          <definition value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-question-library#Demographics.address"/>
          <type value="group"/>
          <required value="true"/>
          <item>
            <linkId value="4.1"/>
            <type value="display"/>
          </item>
        </item>
        <item>
          <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext">
            <valueExpression>
              <name value="person"/>
              <language value="text/fhirpath"/>
              <expression value="%patient.contact"/>
            </valueExpression>
          </extension>
          <extension url="http://hl7.org/fhir/StructureDefinition/variable">
            <valueExpression>
              <name value="linkIdPrefix"/>
              <language value="text/fhirpath"/>
              <expression value="%linkIdPrefix+'contact.'"/>
            </valueExpression>
          </extension>
          <linkId value="5"/>
          <type value="group"/>
          <required value="true"/>
          
          
          <item>
            <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire">
              <valueCanonical value="http://hl7.org/fhir/uv/sdc/Questionnaire/questionnaire-sdc-modular-contact|3.0.0"/>
            </extension>
            <linkId value="5.1"/>
            <text value="Unable to resolve 'contact' sub-questionnaire"/>
            <type value="display"/>
            <repeats value="true"/>
          </item>
        </item>
      </Questionnaire>
    </resource>
  </parameter>
  <parameter>
    <name value="outcome"/>
    <resource>
      <OperationOutcome>
        <issue>
          <severity value="warning"/>
          <code value="informational"/>
          <details>
            <text value="Unable to..."/>
          </details>
          <expression value="tbd"/>
        </issue>
      </OperationOutcome>
    </resource>
  </parameter>
</Parameters>
